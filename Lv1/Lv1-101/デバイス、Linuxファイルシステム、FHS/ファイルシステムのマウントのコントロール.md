# LinuC Lv1-101
## デバイス, Linuxファイルシステム, FHS - `ファイルシステムのマウントのコントロール`
---
### <span style="color: red; ">**`/etc/mtab`**</span>
- 現在マウントされているファイルシステムの情報が格納されているファイル.

### <span style="color: red; ">**`/etc/fstab`**</span>
- 利用するファイルシステムのマウント設定を事前に行っておく設定ファイル.
- `/etc/fstab`ファイルの設定項目は**6つ**.
    - 1つ目の項目にはデバイス名を指定 (/dev/sda1のような**デバイスファイル**を書くか、**ラベル**や**UUID**を使った指定).
- 主なマウントオプション
    | オプション | 説明 |
    |:----------|:-----|
    | **`async`** | 非同期で入出力を行う |
    | **`auto`** | `mount -a`コマンドの実行時にマウント |
    | **`noauto`** | `mount -a`コマンドの実行時にマウントしない |
    | **`defaults`** | デフォルト設定 (<span style="color: red; ">**`async`, `auto`, `dev`, `exec`, `nouser`, `rw`, `suid`**</span>) |
    | **`exec`** | バイナリの実行を許可 |
    | **`noexec`** | バイナリの実行を禁止 |
    | **`ro`** | 読み取り専用 |
    | **`rw`** | 読み書き許可 |
    | **`suid`** | SUIDとSGIDの有効化 |
    | **`user`** | 一般ユーザーにマウントを許可する |
    | **`users`** | 一般ユーザでマウントを可能, 誰でもアンマウント出来る |
    | **`nouser`** | 一般ユーザーによるマウントを禁止 |
    
### <span style="color: red; ">**`mount`**</span>コマンド
- ファイルシステムのマウントを行う.
- **root以外の一般ユーザでコマンドを実行すると, 現在マウントされているファイルシステムの一覧が表示**.
- 書式
    ```sh
    mount [オプション] [マウントするデバイス名] [マウントポイント]
    ```
    - 「`/etc/fstab`」ファイルにあらかじめエントリが記述されている場合, 「デバイス名」か「マウントポイント」のどちらか片方だけ指定すれば, 片方が参照され自動的に決定.
    - オプションなどを指定せずに実行した場合, **現在マウントされているファイルシステムの一覧を表示**.
- オプション
    | オプション | 説明 |
    |:----------|:-----|
    | **`-a`** | `/etc/fstab`ファイルに記載されているファイルシステムを全てマウント (noautoは除く) |
    | **`-o`** | マウントオプションの指定 |
    | **`-t`** | ファイルシステムの種類を指定 (指定なしの場合は自動推測) |

#### <span style="color: red; ">*現在マウントされているファイルシステムを確認できるコマンド*</span>
- **`mount`**
- **`cat /etc/mtab`**
- **`cat /proc/self/mounts`**
- **`cat /proc/mounts`**

### <span style="color: red; ">**`unmount`**</span>コマンド
- ファイルシステムのアンマウントを行う.
- ファイルシステムにある**ファイルが操作中の場合**や、**ユーザがファイルシステム内で操作をしている場合**、そのファイルシステムは**アンマウントできない**.
- 書式
    ```sh
    umount [オプション] [マウントされているデバイス名、またはマウントポイント]
    ```
- オプション
    | オプション | 説明 |
    |:----------|:-----|
    | **`-a`** | `/etc/mtab`ファイルに記載されているファイルシステムを全てアンマウント |
    | **`-t`** | 指定した種類のファイルシステムのみをアンマウント |
    - **`-at xfs`** オプション ... 現在マウントされている(xfs形式のファイルシステムを全てアンマウント.