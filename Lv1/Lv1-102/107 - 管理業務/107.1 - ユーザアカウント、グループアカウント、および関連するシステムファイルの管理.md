# LinuC Lv1-102
## 107.1 管理業務 - `ユーザアカウント、グループアカウント、および関連するシステムファイルの管理` ★★★★★
> ユーザアカウントの追加、削除、一時停止、変更ができる.
---
### アカウントに関するファイル
#### <span style="color: red; ">**`/etc/passwd`**</span>ファイル - ユーザアカウント情報
> ユーザーのプライマリグループを指定しているファイル.
>- `/etc/passwd`ファイルの**パスワード欄に「x」とある場合、パスワードは`/etc/shadow`に暗号化されて格納**.
>- `/etc/passwd`ファイルのパーミッションは**644**(-rw-r--r--).
- 書式
    `ユーザ名：パスワード：UID：GID：コメント：ホームディレクトリ：ログインシェル`

</br>

#### <span style="color: red; ">**`/etc/shadow`**</span>ファイル - シャドーパスワード情報
> 暗号化されているパスワード(**シャドウパスワード**)や, パスワードの**有効期限**に関する情報, ユーザー**パスワードの最終更新日**が格納.
>- `/etc/shadow`ファイルのパーミッションには**400**(r--------), **600**(rw-------), **000**(---------)が適切.
- 書式
    `ユーザ名：パスワード：日数1：日数2：日数3：日数4：日数5：日数6：フラグ`

</br>

#### <span style="color: red; ">**`/etc/group`**</span>ファイル - グループ情報
> グループアカウント情報が記載.
>- グループの**メンバーリストには所属メンバーが記載されていない場合がある**.
- 書式
    `グループ名：グループパスワード：グループID(GID)：グループメンバー`

</br>

#### <span style="color: red; ">**`/etc/skel`**</span>ファイル - ホームディレクトリのデフォルトファイル
> ユーザを新規作成する際、**ホームディレクトリに自動的に作成するファイルを置く**ディレクトリ.

</br>

#### <span style="color: red; ">**`対話的ログインを禁止する`**</span>ログインシェル
> 対話的ログインを禁止するにはログインシェルを「**`/bin/false`**」または「**`/sbin/nologin`**」に設定.

</br>

### アカウント情報に関するコマンド
#### <span style="color: red; ">**`id`**</span> - ユーザのUIDや、所属するグループのGIDを確認するコマンド
- 書式
    ```sh
    id [オプション] [ユーザ名]
    ```
- オプション
    | オプション | 説明 |
    |:----------|:-----|
    | **-u** | **UID** (ユーザID)を表示 |
    | **-g** | ユーザの**プライマリグループのGID** (グループID)を表示 |
    | **-G** | 所属する**すべてのグループのGID**を表示 |
    - ユーザ名を省略でコマンドを実行したユーザの情報が表示.
    - また、オプションを省略でUIDと所属する全てのグループのGIDを表示.

</br>

### ユーザ情報に関するコマンド
#### <span style="color: red; ">**`useradd`**</span> - ユーザアカウントを作成するコマンド
- 書式
    ```sh
    useradd [オプション] ユーザ名
    ```
- オプション
    | オプション | 説明 |
    |:----------|:-----|
    | **-c コメント** | **コメント**を指定 (comment) |
    | **-d ディレクトリ** | **ホームディレクトリ**を指定 (directory) |
    | **-g グループ名｜GID** | **プライマリグループ**を指定 (group) |
    | **-G グループ名｜GID** | プライマリグループ以外に参加するグループ(**サブグループ**)を指定 |
    | **-s シェル** | ログイン**シェル**を指定 (shell) |
    | **-D** | アカウントの**デフォルト値**を表示または指定 (default) |
    | **-m** | **ホームディレクトリを作成** (make) |
    - オプションを省略すると、 **`/etc/default/useradd`** ファイルが参照.

</br>

#### <span style="color: red; ">**`userdel`**</span> - ユーザーアカウントを削除するコマンド
- 書式
    ```sh
    userdel [オプション] ユーザ名
    ```
- オプション
    | オプション | 説明 |
    |:----------|:-----|
    | **-r (--remove)** | **ホームディレクトリ**も削除する |
    | **-f (--force)** | **強制的**に削除する |

</br>

#### <span style="color: red; ">**`usermod`**</span> - ユーザのアカウント情報を変更するコマンド
- 書式
    ```sh
    usermod [オプション] ユーザ名
    ```
- オプション
    | オプション | 説明 |
    |:----------|:-----|
    | **-c コメント** | **コメント**を指定 (comment) |
    | **-d ディレクトリ** | **ホームディレクトリ**を指定 (directory) |
    | **-g グループ名｜GID** | **プライマリグループ**を指定 (group) |
    | **-G グループ名｜GID** | プライマリグループ以外に参加するグループ(**サブグループ**)を指定 |
    | **-s シェル** | ログイン**シェル**を指定 (shell) |
    | **-L** | パスワードを**ロック**する (lock) |
    | **-U** | パスワードを**アンロック**する (unlock) |
    | **-p** | 暗号化パスワードを設定する (password) |

</br>

#### <span style="color: red; ">**`chsh`**</span> - シェルを変更するコマンド
- 書式
    ```sh
    chsh [-s ログインシェル] [user]
    ```
    - -sオプション ... **対話的ログインを禁止**する.

</br>

#### <span style="color: red; ">**`passwd`**</span> - パスワードを変更するコマンド
- 書式
    ```sh
    passwd [オプション] [ユーザ名]
    ```
- オプション
    | オプション | 説明 |
    |:----------|:-----|
    | **-l** | パスワードを**ロック**する (lock) |
    | **-u** | パスワードを**アンロック**する (unlock) |

</br>

### グループ情報に関するコマンド
#### <span style="color: red; ">**`useradd`**</span> - グループを作成するコマンド
- 書式
    ```sh
    groupadd [オプション] グループ名
    ```

</br>

#### <span style="color: red; ">**`groupdel`**</span> - グループアカウントを削除するコマンド
>- **削除したいグループをプライマリグループとしているユーザがいる場合, グループ削除不可**。
>- **サブグループとしているユーザのみなら削除可能**。
- 書式
    ```sh
    groupdel グループ名
    ```

</br>

#### <span style="color: red; ">**`groupmod`**</span> - グループ情報を変更するコマンド
- 書式
    ```sh
    groupmod [オプション] ユーザ名
    ```
- オプション
    | オプション | 説明 |
    |:----------|:-----|
    | **-g GID** | **GID**を変更 (group) |
    | **-n グループ名** | **グループ名**を変更 (name) |

</br>

### ユーザ・グループアカウントに関するコマンド
![img](https://ping-t.com/mondai3/img/jpg/k21736.jpg)

</br>