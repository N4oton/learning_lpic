# LinuC Lv1-101
## デバイス, Linuxファイルシステム, FHS - `ファイルのパーミッションと所有者の管理`
---
### <span style="color: red; ">**`パーミッション`**</span>
- それぞれの権限の許可される内容
    | 権限 | ファイルに適用した場合 | ディレクトリに適用した場合 |
    | :--- | :------------------- | :---------------------- |
    | 読み | ファイルの内容を参照 (cat, more) | ディレクトリ内の内容を参照 |
    | 書き | ファイルに書き込み (vi) | 書き込み権限があるディレクトリ内で, ファイルやディレクトリを作成・削除できる |
    | 実行 | ファイルを実行 | 実行権限があるディレクトリに移動できる |

### <span style="color: red; ">**`chmod`**</span>コマンド
- ファイルやディレクトリのパーミッション(ファイルやディレクトリに対する権限)を変更する.
- 書式
    ```sh
    chmod [-R] パーミッション ファイルまたはディレクトリ
    ```
    - -R オプション ... 指定したディレクトリおよびその配下にあるファイルのパーミッションを変更する.

#### *記号表現*
- 対象, 操作, 権限の順に指定し,`,`を使用して繰り返す.
    | 対象  | 説明                     |
    | :--- | ------------------------ |
    | u    | 所有者の権限               |
    | g    | グループの権限             |
    | o    | その他ユーザの権限         |
    | a    | すべてのユーザの権限        |

    | 操作  | 説明      |
    | :--- | --------- |
    | +    | 権限を付加 |
    | -    | 権限を削除 |
    | =    | 権限を指定 |

    | 権限  | 説明                     |
    | :--- | ------------------------- |
    | r    | 読み取り権限               |
    | w    | 書き込み権限               |
    | x    | 実行権限                   |
    | s    | SUID または SGID          |
    | t    | スティッキービット         |

#### *数値表現*
- 与えられた権限を数値で表す.
    | クラス  | 読み | 書き | 実行 |
    | :------ | :-- | :-- | :-- |
    | 記号    | r | w | x |
    | 数値    | 4 | 2 | 1 |

#### *記号表現と数値表現の表し方*
- 全てのユーザに全権限が付与.
    ```sh:
    記号表現：  rwx rwx rwx
    数値表現：  7   7   7
    ```
- 所有ユーザに読み書き権限, 所有グループとその他のユーザには読み取り権限が付与.
    ```sh:
    記号表現：  rw- r-- r--
    数値表現：  6   4   4
    ```

#### *SUIDを設定*
- プログラムをどのユーザが実行しても, **プログラムの所有ユーザ権限で実行**されるようにSUIDを設定する.
- 設定方法
    - chmodコマンドで**通常のパーミッションの値に4000を加えた値を設定**する.
    - **所有ユーザに「`s`」という権限を追加**(`u+s`).

#### *SGIDを設定*
- プログラムをどのユーザが実行しても, **プログラムを所有するグループの権限で実行**されるようにSGIDを設定する.
- 設定方法
    - chmodコマンドで**通常のパーミッションの値に2000を加えた値を設定**する.
    - **所有グループに「`s`」という権限を追加**(`g+s`).

#### *スティッキービットを設定*
- ディレクトリ内において, **自分以外のユーザが所有するファイルを削除出来ないように**スティッキービットを設定を設定する.
- 設定方法
    - chmodコマンドで**通常のパーミッションの値に1000を加えた値を設定**する.
    - **その他のユーザに「`t`」という権限を追加**(`o+t`).

#### *パーミッション(アクセス権)の情報を確認する*
##### <span style="color: red; ">**`ls`**</span>コマンド
- 書式
    ```sh
    ls -l /etc/passwd
    ```
- 実行結果
    - ![img](https://ping-t.com/mondai3/img/jpg/k32390.jpg)
        1. ファイルの種別
        2. パーミッション
        3. ハードリンク数
        4. 所有ユーザ
        5. 所有グループ
        6. ファイルサイズ
        7. 最終編集日付
        8. ファイル

### <span style="color: red; ">**`umask`**</span>コマンド
- ファイルやディレクトリを新規作成した際の, デフォルトのパーミッションを設定する.
- 書式
    ```sh
    umask [マスク値]
    ```
    - マスク値が0の場合に使用されるデフォルトのパーミッションは, ファイルが「`666`」, ディレクトリが「`777`」.
    - 666を600, 777を700にするマスク値は077.

### <span style="color: red; ">**`chown`**</span>コマンド
- 指定したファイルまたはディレクトリの所有ユーザやグループを変更する.
- 書式
    - 所有ユーザ名を変更する
        ```sh
        chown [-R] ユーザ名 ファイルまたはディレクトリ
        ```
        - -R オプション ... 指定したディレクトリおよびその配下にあるファイルのパーミッションを変更する.
    - 所有グループ名を変更する(`chgrp`でも可能)
        ```sh
        chown [-R] :グループ名 ファイルまたはディレクトリ
        ```
        - 「`:`」の部分は「`.`」としても同じ.
    - 所有ユーザと所有グループを同時に変更する場合
        ```sh
        chown [-R] ユーザ名:グループ名 ファイルまたはディレクトリ
        ```

### <span style="color: red; ">**`chgrp`**</span>コマンド
- 指定したファイルまたはディレクトリの所有グループのみを変更する.
- 書式
    - 所有グループ名を変更する
        ```sh
        chgrp [-R] グループ名 ファイルまたはディレクトリ
        ```
        - -R オプション ... 指定したディレクトリおよびその配下にあるファイルのパーミッションを変更する.