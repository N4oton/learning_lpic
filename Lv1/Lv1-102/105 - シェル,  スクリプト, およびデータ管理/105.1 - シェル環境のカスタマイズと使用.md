# LinuC Lv1-102
## 105.1 シェル、スクリプト、およびデータ管理 - `シェル環境のカスタマイズと使用` ★★★★☆
> ユーザの要求に応じてシェル環境をカスタマイズできる. 全体のプロファイルおよびユーザのプロファイルを変更する.
---
### シェル変数および環境変数に関するコマンド
>- 設定されている全ての環境変数を一覧表示できるコマンド ... **`set`, `env`, `printenv`**
#### <span style="color: red; ">**`export`**</span> - 環境変数を定義
> シェル変数を環境変数として設定する.
- 書式
    ```sh
    export [オプション] [シェル変数名]
    ```

</br>

#### <span style="color: red; ">**`env`**</span> - 環境を変更
> 環境変数を一時的に変更したり, 削除したりしてコマンドを実行できる.
- 書式
    ```sh
    env [オプション] [環境変数名=値] [コマンド]
    ```
- オプション
    | オプション | 説明 |
    |:----------|:-----|
    | **オプション無し** | **全ての環境変数を表示** |
    | **-i** | 環境変数が**設定されていない状態にする** |
    | **-u 環境変数名** | 環境変数を**一時的に削除** |
    | **環境変数名=値** | 環境変数の値を**一時的に指定された値に変更** |

</br>

#### <span style="color: red; ">**`set`**</span> - シェルのオプションを設定
> シェルのオプション機能をの有効・無効を設定.
- 書式
    ```sh
    set [-o][+o] オプション
    ```
    - `-o` ... オプション**有効**
    - `+o` ... オプション**無効**
    - `set -o`(引数なし) ... **シェル変数・関数と環境変数の両方の一覧を表示**.
- オプション
    | オプション | 説明 |
    |:----------|:-----|
    | **allexport**	| 作成・変更した**変数を自動的に環境変数とする** (エクスポートする) |
    | **emacs**	| **emacsエディタ同様のキーバインド**にする |
    | **vi** | **viエディタ同様のキーバインド**にする |
    | **ignoreeof**	| **Ctrl+Dのキー入力でログアウトしない**ようにする |
    | **noclobber** | **リダイレクト演算子による既存ファイルへの上書きを禁止する** |
    | **noglob** | **メタキャラクタを使用したファイル名の展開を無効化**する |
    | **noexec** | シェルスクリプトを読み込むが**実行はせずに構文エラーのみを確認**する |

</br>

#### <span style="color: red; ">**`unset`**</span> - 環境変数やシェル変数の削除
> 設定済みの環境変数やシェル変数の削除.
- 書式
    ```sh
    unset [変数名]
    ```

</br>

### シェル関数に関するコマンド
#### <span style="color: red; ">**`function`**</span> - シェル関数を定義
> bash上で独自のシェル関数を作成.
- 書式
    ```sh
    function 関数名() { コマンド; }
    ```

</br>

#### <span style="color: red; ">**`declare -f`**</span> - シェル関数を表示
> 定義済みのシェル関数の確認.
- 書式
    ```sh
    declare -f [関数名]
    ```

</br>

### エイリアスに関するコマンド
#### <span style="color: red; ">**`alias`**</span> - エイリアスの登録
> **エイリアス機能を使用**する.
- 書式
    ```sh
    alias [エイリアス名 = 'コマンド']
    ```
    - 引数無し実行で**現在登録されているエイリアスを確認**.

</br>

#### <span style="color: red; ">**`unalias`**</span> - エイリアスの削除
> 登録した**エイリアスを削除**する.
- 書式
    ```sh
    unalias [-a] [エイリアス名]
    ```
    - `-a`オプション ... **登録されている全てのエイリアスが削除**.

</br>

#### <span style="color: red; ">**`\`**</span> - エイリアスの設定無視
> **エイリアスを無視してそのままの変数名を指定**する.
- 書式
    ```sh
    \エイリアス名
    ```

</br>

### bashの設定ファイルと起動する順序
- 代表的なbash設定ファイル
    - 全ユーザに適用する
        | ファイル | 説明 |
        |:----------|:-----|
        | **/etc/bash.bashrc** | **Debian**系) bash**起動時に全ユーザが参照**　(エイリアスなど) |
        | **/etc/bashrc** | **RedHat**系) bash**起動時に全ユーザが参照**　(エイリアスなど) |
        | **/etc/profile** | ログイン時に**全ユーザが参照** (環境変数, 利用環境) |
    - 各ユーザ個別に適用する
        | ファイル | 説明 |
        |:----------|:-----|
        | **~/.bash_profile** | ログイン時に**ログインユーザが参照** (自分用の環境変数などユーザ環境) |
        | **~/.bash_login** | **`~/.bash_profile`がない場合**に参照. |
        | **~/.profile** | **`~/.bash_profile`ファイルと `~/.bash_login`ファイルがない場合**に参照 |
        | **~/.bashrc** | **bash起動時に実行させたい処理** (エイリアスなど) |
        | **~/.bash_logout** | **bashログアウト前に行いたい処理** |

</br>

#### ログイン時の起動順序
##### <span style="color: red; ">**`ログインシェル`**</span>
>- ユーザーのログイン時に最初に起動されるシェル. ログインシェル終了でログアウト.

</br>

##### <span style="color: red; ">**`対話型シェル`**</span>
>- ログインシェルから別のプロセスとして起動するシェル.
>- 起動した際に読み込まれるファイルは **`~/.bashrc`と`/etc/bashrc`** .

</br>

##### ![img](https://www.infraeye.com/study/gif/lpic43.gif)