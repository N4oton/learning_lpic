# LinuC Lv1-102
## 108.1 重要なシステムサービス - `システム時刻の保守` ★★★☆☆
> システム時刻を適切に維持し, NTPによって時計を同期できる.
---
>- ハードウェアクロック ... コンピュータ内蔵時刻.
>- システムクロック ... Linuxカーネルが持つ時刻.

### クロックに関するコマンド
#### <span style="color: red; ">**`date`**</span>コマンド - **システム時刻を表示/設定**
> **コマンドのみを実行すると現在の日付時刻が表示**.
- 書式
    ```sh
    date [MMDDhhmm[CC[YY]][.ss]]
    ```
    - `MM`(月), `DD`(日), `hh`(時), `mm`(分), `CC`(西暦の上2桁), `YY`(西暦の下2桁), `ss`(秒)

- `+`で**任意の形式で日付時刻を表示する**.
    ```sh
    date "+%Y年%M月%D日"
    にすると
    2018年1月19日 になる
    ```

</br>

#### <span style="color: red; ">**`hwclock`**</span>コマンド - **ハードウェア時刻を表示/設定**
- 書式
    ```sh
    hwclock オプション
    ```

- オプション
    | オプション | 説明 |
    |:------|:-----|
    | **-r** | ハードウェアクロックの**表示** (オプション無しでも表示) |
    | **-s** ｜ **--hctosys** | ハードウェアクロックの時刻を**システムクロックに反映** (**S**ystem) |
    | **-w** ｜ **--systohc** | システムクロックの時刻を**ハードウェアクロックに反映** (hard**W**are) |

</br>

### NTPに関するコマンド
#### <span style="color: red; ">**`ntpdate`**</span>コマンド - **NTPサーバーと同期**
> 手動で**NTPサーバから正確な時刻を取得し, システムクロックに反映**させる.
>- **NTPクライアントとしてのツール**.
- 書式
    ```sh
    ntpdate [オプション] NTPサーバ名
    ```

</br>

#### <span style="color: red; ">**`ntpq`**</span>コマンド - **ntpdの時刻同期確認**
- 書式
    ```sh
    ntpq [オプション] [接続先サーバ]
    ```

- オプション
    | オプション | 説明 |
    |:------|:-----|
    | **-q** | 指定したサーバとの同期状態を一覧表示 (query) |
    | **-i** | 対話モードで起動する (info) |

</br>

### NTPサーバの設定
>- NTPサーバから時刻を取得し, **システムクロックと自動で同期させるには`ntpd`デーモンを起動**しておく.
>- **`ntpd`デーモンは, その設定ファイルである`/etc/ntp.conf`を読み込んで起動**.
#### <span style="color: red; ">**`/etc/ntp.conf`**</span> - **NTPサーバーの設定**
>- 外部の**NTPサーバを`server`に指定する**.
- 書式
    ```sh
    server  NTPサーバ名
    diftfile  補正情報ファイルのパス
    logfile  ログファイルのパス
    ```

</br>

### pool.ntp.orgについて
> pool.ntp.orgプロジェクトがNTPサーバを提供.
>- 複数のNTPサーバをまとめて仮想的なNTPサーバとして運用する`DNSラウンドロビン方式`を使用.